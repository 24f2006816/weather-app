<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #74b9ff, #0984e3); min-height: 100vh; padding: 20px; font-family: Arial, sans-serif; }
        .weather-card { background: white; border-radius: 15px; padding: 30px; margin: 20px auto; max-width: 600px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="weather-card">
        <h1 class="text-center mb-4">üå§Ô∏è Weather App</h1>
        <p class="text-center text-muted">Real-time Weather Data</p>
        
        <div class="mb-3">
            <label class="form-label"><strong>Select City:</strong></label>
            <select id="city-select" class="form-select">
                <option value="">Choose a city...</option>
                <option value="london">London, UK</option>
                <option value="newyork">New York, USA</option>
                <option value="tokyo">Tokyo, Japan</option>
                <option value="paris">Paris, France</option>
                <option value="sydney">Sydney, Australia</option>
            </select>
        </div>
        
        <button class="btn btn-primary w-100 mb-3" onclick="getWeather()">Get Weather</button>
        
        <div id="loading" class="text-center mt-3 hidden">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        
        <div id="result" class="mt-4"></div>
    </div>

    <script>
    const cityCoordinates = {
        "london": { lat: 51.5074, lon: -0.1278, name: "London, UK" },
        "newyork": { lat: 40.7128, lon: -74.0060, name: "New York, USA" },
        "tokyo": { lat: 35.6762, lon: 139.6503, name: "Tokyo, Japan" },
        "paris": { lat: 48.8566, lon: 2.3522, name: "Paris, France" },
        "sydney": { lat: -33.8688, lon: 151.2093, name: "Sydney, Australia" }
    };

    async function getWeather() {
        const city = document.getElementById("city-select").value;
        if (!city) {
            alert("Please select a city");
            return;
        }

        showLoading();
        
        const coords = cityCoordinates[city];
        
        try {
            const response = await fetch("https://api.open-meteo.com/v1/forecast?latitude=" + coords.lat + "&longitude=" + coords.lon + "&current_weather=true");
            const data = await response.json();
            
            const temp = data.current_weather.temperature;
            const weatherCode = data.current_weather.weathercode;
            const windSpeed = data.current_weather.windspeed;
            
            const weatherDescription = getWeatherDescription(weatherCode);
            
            document.getElementById("result").innerHTML = 
                "<div class=\"card bg-light\">" +
                    "<div class=\"card-body text-center\">" +
                        "<h3>" + coords.name + "</h3>" +
                        "<div class=\"display-4 text-primary\">" + temp + "¬∞C</div>" +
                        "<p class=\"fs-5\">" + weatherDescription + "</p>" +
                        "<div class=\"row mt-3\">" +
                            "<div class=\"col-6\">" +
                                "<strong>Wind Speed:</strong><br>" +
                                windSpeed + " km/h" +
                            "</div>" +
                            "<div class=\"col-6\">" +
                                "<strong>Wind Direction:</strong><br>" +
                                data.current_weather.winddirection + "¬∞" +
                            "</div>" +
                        "</div>" +
                    "</div>" +
                "</div>";
        } catch (error) {
            document.getElementById("result").innerHTML = 
                "<div class=\"alert alert-danger\">" +
                    "Error fetching weather data. Please try again." +
                "</div>";
        } finally {
            hideLoading();
        }
    }

    function getWeatherDescription(code) {
        const weatherMap = {
            0: "Clear sky", 1: "Mainly clear", 2: "Partly cloudy", 3: "Overcast",
            45: "Fog", 48: "Fog", 51: "Light drizzle", 53: "Moderate drizzle",
            61: "Slight rain", 63: "Moderate rain", 65: "Heavy rain",
            80: "Slight rain showers", 81: "Moderate rain showers", 95: "Thunderstorm"
        };
        return weatherMap[code] || "Unknown weather condition";
    }

    function showLoading() {
        document.getElementById("loading").classList.remove("hidden");
    }

    function hideLoading() {
        document.getElementById("loading").classList.add("hidden");
    }
    </script>
</body>
</html>
